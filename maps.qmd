# Maps {.unnumbered #sec-maps}

## Volume I - Passage of the Sloop Thornton from Victoria to the Queen Charlotte Islands (now called Haida Gwaii). {#sec-maps-thornton}

```{r}
#| echo: false
#| message: false
#| warning: false
library(leaflet)
library(sf)
library(dplyr)

# 1) Read the GeoJSON
pts <- st_read("geojson/skidegate_trip_up_points.geojson", quiet = TRUE) %>%
  select(Name) %>%
  st_transform(4326) %>%
  st_zm(drop = TRUE, what = "ZM")

lns <- st_read("geojson/skidegate_trip_up_paths.geojson", quiet = TRUE) %>%
  select(Name) %>%
  st_transform(4326) %>%
  st_zm(drop = TRUE, what = "ZM")

# 3) Leaflet map
m <- leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
  # Base groups
  addTiles(group = "OSM (default)") %>%
  addProviderTiles(providers$CartoDB.Positron, group = "Positron (minimal)") %>%
  addProviderTiles(providers$Esri.WorldImagery, group = "World Imagery (satellite)") %>%

  # Overlay groups (name them so you can toggle)
  addPolylines(
    data = lns,
    group = "Thornton Route",
    color = "#f95d6a",
    weight = 2,
    opacity = 0.9,
    smoothFactor = 0.5
  ) %>%
  addCircleMarkers(
  data = pts,
  group = "Thornton Journey Locations",
  radius = 5,
  stroke = TRUE,
  color = "black",     # outline colour
  weight = 1,          # thin line
  fillColor = "#ffa600",
  fillOpacity = 0.8,
  popup = ~Name,
  label = ~Name
  ) %>%
  addLayersControl(
    baseGroups = c("OSM (default)", "Positron (minimal)", "World Imagery (satellite)"),
    overlayGroups = c("Thornton Route", "Thornton Journey Locations"),
    options = list(collapsed = FALSE)
  )

legend_html <- "
<div style='background: white; padding: 5px; border-radius: 4px'>
<b>Legend</b><br>
<div><svg width='12' height='12'>
<circle cx='6' cy='6' r='5' stroke='black' stroke-width='1' fill='#ffa600'/></svg>
 Thornton Journey Locations</div>
</div>
"

m <- m %>%
  addControl(legend_html, position = "bottomleft")

m


```

## Volumes III & IV - Canoe Trips {#sec-maps-canoe}

```{r}
#| echo: false
#| message: false
#| warning: false
library(leaflet)
library(sf)
library(dplyr)

# 1) Read the GeoJSON
cumshewa_out <- st_read("geojson/canoe_cumshewa_out_points.geojson", quiet = TRUE) %>%
  select(Name) %>%
  st_transform(4326) %>%
  st_zm(drop = TRUE, what = "ZM")

cumshewa_back <- st_read("geojson/canoe_cumshewa_back_points.geojson", quiet = TRUE) %>%
  select(Name) %>%
  st_transform(4326) %>%
  st_zm(drop = TRUE, what = "ZM")

masset_out <- st_read("geojson/canoe_masset_out_points.geojson", quiet = TRUE) %>%
  select(Name) %>%
  st_transform(4326) %>%
  st_zm(drop = TRUE, what = "ZM")

masset_back <- st_read("geojson/canoe_masset_back_points.geojson", quiet = TRUE) %>%
  select(Name) %>%
  st_transform(4326) %>%
  st_zm(drop = TRUE, what = "ZM")

cumshewa_path <- st_read("geojson/canoe_cumshewa_paths.geojson", quiet = TRUE) %>%
  select(Name) %>%
  st_transform(4326) %>%
  st_zm(drop = TRUE, what = "ZM")

masset_path <- st_read("geojson/canoe_masset_paths.geojson", quiet = TRUE) %>%
  select(Name) %>%
  st_transform(4326) %>%
  st_zm(drop = TRUE, what = "ZM")

# 3) Leaflet map
m <- leaflet(options = leafletOptions(preferCanvas = TRUE)) %>%
  # Base groups
  addTiles(group = "OSM (default)") %>%
  addProviderTiles(providers$CartoDB.Positron, group = "Positron (minimal)") %>%
  addProviderTiles(providers$Esri.WorldImagery, group = "World Imagery (satellite)") %>%

  # Overlay groups (name them so you can toggle)
  addPolylines(
    data = cumshewa_path,
    group = "Cumshewa Canoe Journey",
    color = "#1b9e77",
    weight = 2,
    opacity = 0.9,
    smoothFactor = 0.5
  ) %>%
  addPolylines(
    data = masset_path,
    group = "Masset Canoe Journey",
    color = "#7570b3",
    weight = 2,
    opacity = 0.9,
    smoothFactor = 0.5
  ) %>%
  addCircleMarkers(
  data = cumshewa_out,
  group = "Cumshewa Journey Out",
  radius = 5,
  stroke = TRUE,
  color = "black",     # outline colour
  weight = 1,          # thin line
  fillColor = "#ffa600",
  fillOpacity = 0.8,
  popup = ~Name,
  label = ~Name
  ) %>%
  addCircleMarkers(
  data = cumshewa_back,
  group = "Cumshewa Journey Back",
  radius = 5,
  stroke = TRUE,
  color = "black",     # outline colour
  weight = 1,          # thin line
  fillColor = "#f95d6a",
  fillOpacity = 0.8,
  popup = ~Name,
  label = ~Name
  ) %>%
  addCircleMarkers(
  data = masset_out,
  group = "Masset Journey Out",
  radius = 5,
  stroke = TRUE,
  color = "black",     # outline colour
  weight = 1,          # thin line
  fillColor = "#e7298a",
  fillOpacity = 0.8,
  popup = ~Name,
  label = ~Name
  ) %>%
  addCircleMarkers(
  data = masset_back,
  group = "Masset Journey Back",
  radius = 5,
  stroke = TRUE,
  color = "black",     # outline colour
  weight = 1,          # thin line
  fillColor = "#66a61e",
  fillOpacity = 0.8,
  popup = ~Name,
  label = ~Name
  ) %>%
  addLayersControl(
    baseGroups = c("OSM (default)", "Positron (minimal)", "World Imagery (satellite)"),
    overlayGroups = c("Cumshewa Canoe Route", "Masset Canoe Route", "Cumshewa Locations","Cumshewa Return Locations", "Masset Locations","Masset Return Locations"),
    options = list(collapsed = FALSE)
  )

legend_html <- "
<div style='background: white; padding: 5px; border-radius: 4px'>
<b>Legend</b><br>

<!-- Points -->
<div style='margin-top:8px;'>
  <svg width='12' height='12' style='vertical-align:middle;'>
    <circle cx='6' cy='6' r='5' stroke='black' stroke-width='1' fill='#ffa600'/>
  </svg>
  <span style='vertical-align:middle;'>Cumshewa Journey Out</span>
</div>

<div>
  <svg width='12' height='12' style='vertical-align:middle;'>
    <circle cx='6' cy='6' r='5' stroke='black' stroke-width='1' fill='#f95d6a'/>
  </svg>
  <span style='vertical-align:middle;'>Cumshewa Journey Back</span>
</div>

<div>
  <svg width='12' height='12' style='vertical-align:middle;'>
    <circle cx='6' cy='6' r='5' stroke='black' stroke-width='1' fill='#e7298a'/>
  </svg>
  <span style='vertical-align:middle;'>Masset Journey Out</span>
</div>

<div>
  <svg width='12' height='12' style='vertical-align:middle;'>
    <circle cx='6' cy='6' r='5' stroke='black' stroke-width='1' fill='#66a61e'/>
  </svg>
  <span style='vertical-align:middle;'>Masset Journey Back</span>
</div>

</div>
"

m <- m %>%
  addControl(legend_html, position = "bottomleft")

m


```
